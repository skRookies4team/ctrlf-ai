# CTRL+F 프로젝트 기술 스택 및 아키텍처 보고서

> SK 쉴더스 최종 프로젝트 4조 (팔방미인)
> 작성일: 2026-01-03 (v1.1)

---

## 1. 프로젝트 개요

CTRL+F는 **기업용 AI 기반 교육/정보 검색 플랫폼**으로, RAG(Retrieval-Augmented Generation) 기술을 활용하여 사내 규정, 교육 콘텐츠, 정보보안 문서 등을 검색하고 질의응답을 제공합니다.

### 1.1 레포지토리 구성

| 레포지토리 | 역할 | 주요 기술 |
|-----------|------|----------|
| **ctrlf-front** | 웹 프론트엔드 | React 19, TypeScript, Vite |
| **ctrlf-back** | 메인 백엔드 | Java 17, Spring Boot (멀티 모듈) |
| **ctrlf-ai** | AI 게이트웨이 | Python 3.12, FastAPI |
| **ctrlf-ragflow** | RAG 전처리 | Python, RAGFlow, Milvus |

---

## 2. 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              CTRL+F 시스템 아키텍처                           │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────┐     HTTPS      ┌─────────────────────────────────────────────┐
│              │ ◄──────────────►│                ctrlf-back                  │
│  ctrlf-front │                 │          (Spring Boot Gateway)             │
│   (React)    │                 │                                            │
│              │                 │  ┌─────────────┐  ┌─────────────────────┐  │
│  Port: 80    │                 │  │ api-gateway │  │   infra-service     │  │
│  (Nginx)     │                 │  │   :8080     │  │      :9003          │  │
└──────────────┘                 │  └─────────────┘  └─────────────────────┘  │
       │                         │  ┌─────────────┐  ┌─────────────────────┐  │
       │                         │  │chat-service │  │ education-service   │  │
       │                         │  │   :9005     │  │      :9002          │  │
       │                         │  └─────────────┘  └─────────────────────┘  │
       │                         └─────────────────────────────────────────────┘
       │                                        │
       │                                        │ HTTP/Internal API
       │                                        ▼
       │                         ┌─────────────────────────────────────────────┐
       │                         │               ctrlf-ai                      │
       │  WebSocket              │          (FastAPI Gateway)                  │
       └─────────────────────────►                                             │
                                 │    /ai/chat/*      - AI 채팅                │
                                 │    /ai/faq/*       - FAQ 생성               │
                                 │    /ai/quiz/*      - 퀴즈 생성              │
                                 │    /internal/*     - 내부 API               │
                                 │    /ws/*           - WebSocket              │
                                 │                                             │
                                 │    Port: 8000                               │
                                 └─────────────────────────────────────────────┘
                                                │
                                                │
                    ┌───────────────────────────┼───────────────────────────┐
                    │                           │                           │
                    ▼                           ▼                           ▼
        ┌───────────────────┐      ┌───────────────────┐      ┌───────────────────┐
        │   ctrlf-ragflow   │      │      Milvus       │      │    LLM Server     │
        │  (RAG Pipeline)   │      │   (Vector DB)     │      │   (EXAONE/vLLM)   │
        │                   │      │                   │      │                   │
        │  문서 업로드      │      │  벡터 검색        │      │  텍스트 생성      │
        │  텍스트 추출      │      │  유사도 검색      │      │  채팅 응답        │
        │  청킹/임베딩      │      │  Port: 19530      │      │  스트리밍         │
        └───────────────────┘      └───────────────────┘      └───────────────────┘
                    │
                    ▼
        ┌───────────────────┐
        │  Embedding Server │
        │  (OpenAI / Local) │
        │                   │
        │  text-embedding-  │
        │  3-large (3072d)  │
        │  또는             │
        │  SRoBERTa (384d)  │
        └───────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│                            공통 인프라 서비스                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐   ┌─────────────────┐   ┌─────────────────┐           │
│  │   PostgreSQL    │   │    Keycloak     │   │     AWS S3      │           │
│  │   (pgvector)    │   │    (인증/권한)   │   │   (파일 저장)    │           │
│  │   Port: 5432    │   │   Port: 8090    │   │                 │           │
│  └─────────────────┘   └─────────────────┘   └─────────────────┘           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. 레포지토리별 상세 기술 스택

### 3.1 ctrlf-front (프론트엔드)

#### 기술 스택

| 구분 | 기술 | 버전 |
|------|------|------|
| **언어** | TypeScript | ~5.9.3 |
| **UI 프레임워크** | React | ^19.2.0 |
| **빌드 도구** | Vite | ^7.2.2 |
| **라우팅** | react-router-dom | ^7.9.6 |
| **인증** | keycloak-js | ^26.2.1 |
| **아이콘** | lucide-react | ^0.553.0 |
| **린팅** | ESLint | ^9.39.1 |
| **타입 린팅** | typescript-eslint | ^8.46.3 |

#### 프로젝트 구조

```
ctrlf-front/
├── .github/workflows/     # CI/CD 파이프라인
├── kubernetes/            # K8s 배포 설정
├── nginx/                 # Nginx 웹 서버 설정
├── public/                # 정적 자산
├── src/                   # 소스 코드
├── Dockerfile             # Docker 빌드
├── vite.config.ts         # Vite 설정
├── tsconfig.json          # TypeScript 설정
└── package.json           # 의존성
```

#### 언어 비율
- TypeScript: 86.6%
- CSS: 13.4%

---

### 3.2 ctrlf-back (메인 백엔드)

#### 기술 스택

| 구분 | 기술 | 버전/설명 |
|------|------|----------|
| **언어** | Java | 17 |
| **프레임워크** | Spring Boot | 멀티 모듈 아키텍처 |
| **빌드 도구** | Gradle | Wrapper 포함 |
| **DB 마이그레이션** | Flyway | - |
| **코드 포매팅** | Spotless | Eclipse formatter |
| **API 문서** | springdoc | 2.x (OpenAPI) |
| **유효성 검증** | Jakarta Validation | - |
| **테스트** | JUnit 5 | - |

#### 마이크로서비스 구성

| 서비스 | 포트 | 역할 | DB 스키마 |
|--------|------|------|-----------|
| **api-gateway** | 8080 | API 라우팅/게이트웨이 | - |
| **chat-service** | 9005 | 챗봇 기능 | chat |
| **education-service** | 9002 | 교육 콘텐츠 관리 | education |
| **infra-service** | 9003 | 인프라/사용자 관리 | infra |

#### 프로젝트 구조

```
ctrlf-back/
├── api-gateway/              # API 게이트웨이
├── chat-service/             # 챗봇 서비스
├── education-service/        # 교육 서비스
├── infra-service/            # 인프라/사용자 관리
├── libs/common-utils/        # 공유 라이브러리
├── keycloak-realms/          # Keycloak Realm 설정
├── keycloak-themes/          # Keycloak 커스텀 테마
├── kubernetes/               # K8s 배포 설정
├── postgres-init/            # DB 초기화 스크립트
├── scripts/                  # 운영 스크립트
├── docker-compose.yml        # 로컬 개발 환경
├── build.gradle              # 루트 빌드 설정
└── settings.gradle           # Gradle 모듈 설정
```

#### 언어 비율
- Java: 94.7%
- Shell: 2.2%
- PowerShell: 2.1%
- FreeMarker, CSS, Dockerfile: 기타

---

### 3.3 ctrlf-ai (AI 게이트웨이)

#### 기술 스택

| 구분 | 기술 | 버전 |
|------|------|------|
| **언어** | Python | 3.12 |
| **웹 프레임워크** | FastAPI | >=0.115.0 |
| **ASGI 서버** | Uvicorn | >=0.32.0 |
| **설정 관리** | pydantic-settings | >=2.6.0 |
| **HTTP 클라이언트** | httpx | >=0.27.0 |
| **벡터 DB 클라이언트** | pymilvus | >=2.5.0 |
| **문서 처리** | PyMuPDF, python-docx, olefile | 최신 |
| **TTS** | gTTS | >=2.5.0 |
| **이미지 처리** | Pillow | >=10.0.0 |
| **데이터 처리** | pandas, openpyxl | 최신 |
| **퍼지 매칭** | rapidfuzz | >=3.0.0 |
| **테스트** | pytest, pytest-asyncio | 최신 |

#### API 엔드포인트

| 경로 | 메서드 | 설명 |
|------|--------|------|
| `/health` | GET | 헬스체크 |
| `/health/ready` | GET | 준비 상태 확인 |
| `/ai/chat/messages` | POST | AI 채팅 응답 생성 |
| `/ai/chat/stream` | POST | 스트리밍 채팅 (NDJSON) |
| `/ai/gap/policy-edu/suggestions` | POST | RAG Gap 보완 제안 |
| `/ai/quiz/generate` | POST | 퀴즈 자동 생성 |
| `/ai/faq/generate` | POST | FAQ 초안 생성 |
| `/ai/faq/generate/batch` | POST | FAQ 배치 생성 |
| `/ai/video/job/{job_id}/start` | POST | 영상 생성 시작 |
| `/ai/video/job/{job_id}/retry` | POST | 영상 생성 재시도 |
| `/internal/rag/index` | POST | ~~[DEPRECATED - 410 Gone]~~ |
| `/internal/rag/delete` | POST | ~~[DEPRECATED - 410 Gone]~~ |
| `/internal/ai/render-jobs` | POST | 렌더 잡 생성 |
| `/internal/ai/source-sets/{id}/start` | POST | SourceSet 처리 시작 |
| `/internal/ai/source-sets/{id}/status` | GET | SourceSet 상태 조회 |
| `/internal/ai/rag-documents/ingest` | POST | POLICY 문서 ingest |
| `/internal/ai/callbacks/ragflow/ingest` | POST | RAGFlow 콜백 수신 |
| `/internal/ai/feedback` | POST | 피드백 수신 |
| `/internal/ai/context/model` | POST | A/B 테스트 모델 설정 |
| `/internal/ai/context/model/{id}` | GET | A/B 테스트 모델 조회 |
| `/internal/ai/context/model/{id}` | DELETE | A/B 테스트 모델 삭제 |
| `/internal/ai/context/stats` | GET | A/B 컨텍스트 통계 |
| `/ws/videos/{id}/render-progress` | WS | 렌더 진행률 실시간 |

#### 프로젝트 구조

```
ctrlf-ai/
├── app/
│   ├── api/v1/               # API 엔드포인트
│   │   ├── chat.py           # 채팅 API
│   │   ├── chat_stream.py    # 스트리밍 채팅
│   │   ├── faq.py            # FAQ 생성
│   │   ├── quiz_generate.py  # 퀴즈 생성
│   │   ├── gap_suggestions.py# Gap 제안
│   │   ├── health.py         # 헬스체크
│   │   ├── internal_rag.py   # 내부 RAG (DEPRECATED)
│   │   ├── rag_documents.py  # POLICY 문서 ingest
│   │   ├── render_jobs.py    # 렌더 잡
│   │   ├── source_sets.py    # SourceSet
│   │   ├── feedback.py       # 피드백
│   │   └── ab_context.py     # A/B 테스트
│   ├── clients/              # 외부 서비스 클라이언트
│   │   ├── llm_client.py     # LLM 클라이언트
│   │   ├── milvus_client.py  # Milvus 클라이언트
│   │   ├── ragflow_client.py # RAGFlow 클라이언트
│   │   └── http_client.py    # HTTP 클라이언트
│   ├── core/                 # 핵심 설정
│   │   ├── config.py         # 환경설정
│   │   ├── logging.py        # 로깅
│   │   └── exceptions.py     # 예외 정의
│   ├── models/               # 데이터 모델 (Pydantic)
│   ├── services/             # 비즈니스 로직
│   │   ├── chat_service.py   # 채팅 서비스
│   │   ├── faq_service.py    # FAQ 서비스
│   │   ├── intent_service.py # 의도 분류
│   │   ├── pii_service.py    # PII 마스킹
│   │   └── ...
│   ├── telemetry/            # 텔레메트리/모니터링
│   ├── utils/                # 유틸리티
│   └── main.py               # 앱 진입점
├── tests/                    # 테스트 코드
├── mock_ragflow/             # Mock RAGFlow 서비스
├── mock_llm/                 # Mock LLM 서비스
├── mock_backend/             # Mock Backend 서비스
├── Dockerfile                # Docker 빌드
├── docker-compose.yml        # Docker Compose
├── requirements.txt          # Python 의존성
└── .env.example              # 환경변수 예시
```

#### 주요 기능

1. **Intent Router (의도 분류)**
   - Rule Router + LLM Router 하이브리드
   - 도메인 분류: POLICY_QA, EDUCATION_QA, GENERAL_CHAT 등

2. **RAG 검색 백엔드**
   - RAGFlow 또는 Milvus 선택 가능
   - 서비스별 백엔드 분리 (FAQ, Chat, Script)

3. **임베딩 지원**
   - OpenAI text-embedding-3-large (3072 차원)
   - SRoBERTa (384 차원, A/B 테스트용)

4. **금지질문 필터**
   - Exact Match → Fuzzy Match → Embedding Match

5. **PII 마스킹**
   - 내장 규칙 기반 개인정보 마스킹

6. **영상 렌더링**
   - TTS 제공자: gTTS, AWS Polly, GCP TTS
   - 스토리지: 로컬, S3, MinIO, Backend Presigned

---

### 3.4 ctrlf-ragflow (RAG 전처리)

#### 기술 스택

| 구분 | 기술 | 설명 |
|------|------|------|
| **언어** | Python, TypeScript | 각각 48% |
| **RAG 프레임워크** | RAGFlow | 문서 처리 파이프라인 |
| **벡터 DB** | Milvus | 벡터 저장 및 검색 |
| **임베딩** | OpenAI, SRoBERTa | A/B 테스트 지원 |
| **인프라** | Docker Compose | 멀티 서비스 오케스트레이션 |
| **지원 DB** | MySQL, Redis | RAGFlow 지원 서비스 |

#### 문서 처리 파이프라인

```
문서 업로드 → 텍스트 추출 → 규칙 기반 청킹 → 임베딩 생성 → Milvus 저장
```

#### 프로젝트 구조

```
ctrlf-ragflow/
├── apps/                     # 애플리케이션
├── core/                     # 핵심 로직
├── docker/                   # Docker 설정
├── docs/                     # 문서
├── experiments/              # 실험 코드
├── infra/                    # 인프라 설정
├── libs/                     # 라이브러리
├── sample/                   # 샘플 데이터
├── test/                     # 테스트
├── web/src/                  # 웹 프론트엔드
├── workers/ingest-worker/    # 문서 수집 워커
└── docker-compose.yml        # Docker Compose
```

#### 환경 설정

```env
MILVUS_HOST=localhost
MILVUS_PORT=19530
RAGFLOW_HOST=localhost
RAGFLOW_API_KEY=your-api-key
OPENAI_API_KEY=your-openai-key
EMBEDDING_MODEL_SELECTED=openai  # 또는 sroberta
```

#### 언어 비율
- Python: 48.4%
- TypeScript: 48.0%
- CSS: 1.9%
- Less, Shell, HTML: 기타

---

## 4. 데이터베이스 아키텍처

### 4.1 PostgreSQL (관계형 데이터베이스)

| 스키마 | 사용 서비스 | 용도 |
|--------|------------|------|
| **chat** | chat-service | 대화 이력, 세션 |
| **education** | education-service | 교육 콘텐츠, 강좌 |
| **infra** | infra-service | 사용자, 권한 |
| **keycloak** | Keycloak | 인증 데이터 |

**특징:**
- pgvector 확장 지원 (벡터 검색 가능)
- Flyway를 통한 마이그레이션 관리
- 서비스별 독립 스키마 분리

### 4.2 Milvus (벡터 데이터베이스)

| 컬렉션 | 임베딩 모델 | 차원 |
|--------|------------|------|
| **ragflow_chunks** | OpenAI text-embedding-3-large | 3072 |
| **ragflow_chunks_sroberta** | SRoBERTa | 384 |

**특징:**
- L2/COSINE 거리 메트릭 지원
- dataset_id 기반 도메인 필터링
- A/B 테스트를 위한 다중 컬렉션

---

## 5. 인증 및 보안

### 5.1 Keycloak 설정

| 항목 | 값 |
|------|------|
| **Realm** | ctrlf |
| **Client ID** | infra-admin |
| **Base URL** | http://localhost:8090 |
| **기본 테마** | ctrlf-theme |
| **Access Token 만료** | 5분 |
| **Refresh Token 만료** | 30분 |

#### 사용자 역할

| 역할 | 설명 |
|------|------|
| EMPLOYEE | 일반 직원 |
| SYSTEM_ADMIN | 시스템 관리자 |
| CONTENTS_REVIEWER | 콘텐츠 검토자 |
| VIDEO_CREATOR | 영상 제작자 |

### 5.2 내부 API 인증

| 토큰 | 용도 |
|------|------|
| BACKEND_INTERNAL_TOKEN | Backend → AI 내부 통신 |
| RAGFLOW_CALLBACK_TOKEN | RAGFlow → AI 콜백 |
| BACKEND_SERVICE_TOKEN | 서비스 간 인증 |
| BACKEND_API_TOKEN | API 호출 인증 |

### 5.3 보안 기능

- **PII 마스킹**: 개인정보 자동 마스킹
- **금지질문 필터**: 부적절한 질문 차단
- **CORS 설정**: 도메인 기반 접근 제어
- **JWT Bearer 인증**: OpenAPI 보안 스키마

### 5.4 컨테이너 보안

| 항목 | 설정 | 비고 |
|------|------|------|
| **실행 사용자** | 비루트 (UID 1000) | 권한 최소화 원칙 |
| **이미지 베이스** | python:3.12-slim | 공격 표면 최소화 |
| **시크릿 관리** | Kubernetes Secret | 환경변수 주입 |
| **네트워크 정책** | 서비스별 격리 | 마이크로서비스 보안 |

---

## 6. 인프라 및 배포

### 6.1 Docker Compose 구성

#### ctrlf-back

| 서비스 | 이미지 | 포트 | 설명 |
|--------|--------|------|------|
| postgres | pgvector/pgvector:pg16 | 5432 | 메인 DB (pgvector) |
| keycloak-db | postgres:16-alpine | - | Keycloak 전용 DB |
| keycloak | quay.io/keycloak/keycloak:24.0 | 8090 | 인증 서버 |
| keycloak-init | alpine:latest | - | 초기화 스크립트 |

#### ctrlf-ai

| 서비스 | 포트 | 프로필 | 설명 |
|--------|------|--------|------|
| ai-gateway-mock | 8000 | mock | Mock 모드 게이트웨이 |
| ai-gateway-real | 8000 | real | Real 모드 게이트웨이 |
| ragflow | 8080 | mock | Mock RAGFlow |
| llm-internal | 8001 | mock | Mock LLM |
| backend-mock | 8081 | mock | Mock Backend |

### 6.2 Kubernetes 지원

모든 레포지토리에 `kubernetes/` 디렉토리 포함:
- Deployment
- Service
- ConfigMap
- Secret
- Ingress

### 6.3 CI/CD

- GitHub Actions 워크플로우 설정
- 자동 테스트 및 빌드
- Docker 이미지 빌드/푸시

---

## 7. LLM 및 임베딩 모델

### 7.1 LLM 모델

| 용도 | 모델 | 설명 |
|------|------|------|
| **채팅/응답 생성** | LGAI-EXAONE/EXAONE-3.5-7.8B-Instruct | 한국어 특화 LLM |
| **스크립트 생성** | (설정 가능) | SCRIPT_LLM_MODEL |

### 7.2 임베딩 모델

| 모델 | 차원 | 용도 |
|------|------|------|
| OpenAI text-embedding-3-large | 3072 | 메인 임베딩 (A/B 테스트 A그룹) |
| SRoBERTa (paraphrase-multilingual-MiniLM-L12-v2) | 384 | A/B 테스트 B그룹 |
| BAAI/bge-m3 | 1024 | 금지질문 임베딩 |

---

## 8. 개발 환경 설정

### 8.1 필수 요구사항

| 항목 | 버전 |
|------|------|
| Node.js | 22.19.0 |
| npm | >=10.0.0 |
| Java | 17 |
| Python | 3.12 |
| Docker | 최신 |
| Docker Compose | v2 |

### 8.2 빠른 시작

#### Backend (ctrlf-back)
```bash
# 인프라 기동
docker compose up -d

# 서비스 실행 순서
# 1. infra-service (시드 데이터 포함)
# 2. education-service
# 3. chat-service
# 4. api-gateway
```

#### AI Gateway (ctrlf-ai)
```bash
# Mock 모드
docker compose --profile mock up -d

# Real 모드
export RAGFLOW_BASE_URL_REAL=http://real-ragflow:8080
export LLM_BASE_URL_REAL=http://real-llm:8001
export BACKEND_BASE_URL_REAL=http://real-backend:8080
docker compose --profile real up -d
```

#### Frontend (ctrlf-front)
```bash
npm install
npm run dev
```

---

## 9. API 문서화

### Swagger UI 접근 경로

| 서비스 | URL |
|--------|-----|
| AI Gateway | http://localhost:8000/docs |
| Chat Service | http://localhost:9005/swagger-ui.html |
| Education Service | http://localhost:9002/swagger-ui.html |
| Infra Service | http://localhost:9003/swagger-ui.html |

---

## 10. 코드 품질 및 컨벤션

### 10.1 Backend (Java)

- **들여쓰기**: 4칸 스페이스
- **포맷터**: Eclipse formatter + Spotless
- **패키지**: 전부 소문자 (예: `com.ctrlf.education.service`)
- **클래스**: PascalCase
- **메서드/변수**: camelCase
- **상수**: UPPER_SNAKE_CASE

### 10.2 AI Gateway (Python)

- **스타일 가이드**: PEP 8
- **타입 힌트**: 필수
- **테스트**: pytest + pytest-asyncio

### 10.3 Frontend (TypeScript)

- **스타일 가이드**: ESLint + TypeScript ESLint
- **컴포넌트**: Functional Components + Hooks

### 10.4 Git 컨벤션

**커밋 메시지 형식**: `type(scope): subject`

| 타입 | 설명 |
|------|------|
| feat | 새 기능 |
| fix | 버그 수정 |
| refactor | 리팩터링 |
| style | 코드 스타일 |
| test | 테스트 |
| docs | 문서 |
| chore | 빌드/설정 |

---

## 11. 모니터링 및 텔레메트리

### 11.1 텔레메트리 시스템 (ctrlf-ai)

- **TelemetryPublisher**: Backend로 이벤트 전송
- **RequestContextMiddleware**: 요청 컨텍스트 전파
- **헤더 전파**: X-Trace-Id, X-User-Id, X-Dept-Id, X-Conversation-Id, X-Turn-Id

### 11.2 로깅

| 서비스 | 포맷 |
|--------|------|
| ctrlf-ai | JSON (ELK 호환) 또는 Text |
| ctrlf-back | Spring Boot 기본 로깅 |

---

## 12. A/B 테스트 지원

### 12.1 지원 항목

- **임베딩 모델**: OpenAI vs SRoBERTa
- **Milvus 컬렉션**: ragflow_chunks vs ragflow_chunks_sroberta
- **LLM 모델**: 설정 가능

### 12.2 API

```
POST /internal/ai/context/model     # 모델 설정
GET  /internal/ai/context/model/{id} # 모델 조회
DELETE /internal/ai/context/model/{id} # 모델 삭제
GET  /internal/ai/context/stats     # 통계
```

---

## 13. 도메인 분류 체계

| 도메인 | 설명 | Dataset ID 예시 |
|--------|------|----------------|
| POLICY | 사내 규정 | 사내규정 |
| EDUCATION | 교육 콘텐츠 | 정보보안교육 |
| FOUR_MANDATORY | 법정의무교육 | 법정의무교육 |
| TRAINING | 훈련 자료 | - |
| SECURITY | 보안 자료 | - |
| INCIDENT | 사건/사고 | - |

---

## 14. 파일 형식 지원

### 14.1 문서 인덱싱 (ctrlf-ai)

| 확장자 | 라이브러리 |
|--------|-----------|
| .pdf | PyMuPDF |
| .docx | python-docx |
| .doc | olefile |
| .txt | 기본 |
| .hwp | 추가 필요 |

### 14.2 파일 제한

| 파일 유형 | 최대 크기 | 설정 변수 |
|----------|----------|----------|
| **일반 문서** | 50MB | FILE_MAX_SIZE_MB |
| **영상 파일** | 100MB | VIDEO_MAX_UPLOAD_BYTES |
| **요청 본문** | 10MB | - |

- **다운로드 타임아웃**: 60초
- **청크 크기**: 512 토큰 (RAG 최적화)

---

## 15. 클라우드 서비스 연동

### 15.1 AWS

| 서비스 | 용도 |
|--------|------|
| S3 | 파일/영상 저장 |
| Polly | TTS (선택) |

### 15.2 GCP

| 서비스 | 용도 |
|--------|------|
| TTS | 음성 합성 (선택) |

---

## 16. 결론

CTRL+F 프로젝트는 **마이크로서비스 아키텍처**를 기반으로 한 **엔터프라이즈급 AI 플랫폼**입니다.

### 주요 강점

1. **확장성**: 마이크로서비스 분리로 독립적 확장 가능
2. **유연성**: RAGFlow/Milvus, OpenAI/SRoBERTa 등 다양한 백엔드 지원
3. **보안**: Keycloak 인증, PII 마스킹, 내부 API 토큰 인증
4. **관찰성**: 텔레메트리, 구조화된 로깅
5. **테스트 용이성**: Mock 서비스, A/B 테스트 지원
6. **클라우드 네이티브**: Docker, Kubernetes, AWS/GCP 지원

### 기술 요약

| 레이어 | 기술 |
|--------|------|
| **Frontend** | React 19, TypeScript, Vite, Keycloak |
| **Backend** | Spring Boot (Java 17), PostgreSQL |
| **AI Gateway** | FastAPI (Python 3.12), Milvus |
| **RAG Pipeline** | RAGFlow, Milvus, OpenAI/SRoBERTa |
| **인프라** | Docker, Kubernetes, AWS S3 |
| **인증** | Keycloak |

---

*이 보고서는 2026년 1월 3일 기준으로 작성되었습니다. (v1.1)*

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2026-01-02 | 최초 작성 |
| 1.1 | 2026-01-03 | 토큰 만료 시간, 컨테이너 보안, 파일 제한 상세화 추가 (비기능명세서 일관성 반영) |
